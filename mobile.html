<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½å®šæŠ•ç³»ç»Ÿ - ç§»åŠ¨ç«¯</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="css/mobile.css">
    <script src="js/config.js"></script>
    <script src="js/shared.js"></script>
</head>
<body>
<div class="container">
    <div class="index-dashboard">
        <div class="index-title">
            <span>ğŸ“Š å…¨çƒå¸‚åœºæŒ‡æ•°</span>
            <button class="index-refresh-btn" onclick="alert('ç”¨æˆ·IDæŒ‰é’®è¢«ç‚¹å‡»äº†ï¼'); showUserIdManager();">ğŸ”‘ ç”¨æˆ·ID</button>
            <button class="index-refresh-btn" onclick="alert('åˆ·æ–°æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼'); location.reload();">ğŸ”„ åˆ·æ–°</button>
        </div>
        <div class="index-grid">
            <div class="index-item" id="index-ndx">
                <div class="index-name">çº³æ–¯è¾¾å…‹100</div>
                <div class="index-value">--</div>
                <div class="index-change">--</div>
            </div>
            <div class="index-item" id="index-spx">
                <div class="index-name">æ ‡æ™®500</div>
                <div class="index-value">--</div>
                <div class="index-change">--</div>
            </div>
            <div class="index-item" id="index-csi300">
                <div class="index-name">æ²ªæ·±300</div>
                <div class="index-value">--</div>
                <div class="index-change">--</div>
            </div>
            <div class="index-item" id="index-redlow">
                <div class="index-name">ä¸­è¯çº¢åˆ©ä½æ³¢</div>
                <div class="index-value">--</div>
                <div class="index-change">--</div>
            </div>
            <div class="index-item" id="index-gold">
                <div class="index-name">é»„é‡‘</div>
                <div class="index-value">--</div>
                <div class="index-change">--</div>
            </div>
        </div>
    </div>
    
    <div class="daily-pnl-dashboard" id="dailyPnlPanel">
        <div class="pnl-card">
            <div class="pnl-header">
                <div class="pnl-title">ğŸ’° æŒä»“çœ‹æ¿</div>
            </div>

            <div class="pnl-summary">
                <div class="pnl-summary-item">
                    <span class="pnl-label">æŒä»“å¸‚å€¼</span>
                    <span class="pnl-value-large" id="totalAssetInPnl">0</span>
                </div>
                <div class="pnl-summary-item">
                    <span class="pnl-label">ç´¯è®¡æ”¶ç›Š</span>
                    <span class="pnl-value-large" id="totalProfitInPnl">0</span>
                    <span class="pnl-rate" id="totalProfitRateInPnl">0%</span>
                </div>
                <div class="pnl-summary-item">
                    <span class="pnl-label">ä»Šæ—¥æ”¶ç›Š</span>
                    <span class="pnl-value" id="totalDailyPnl">0</span>
                    <span class="pnl-rate" id="dailyProfitRate">0%</span>
                </div>
                <div class="pnl-summary-item">
                    <span class="pnl-label">æŒä»“åŸºé‡‘æ•°</span>
                    <span class="pnl-count-total" id="totalFundCount">0</span>
                    <span class="pnl-rate" id="profitLossRatio">0/0</span>
                </div>
            </div>
            <div class="pnl-loading" id="pnlLoading">
                <div class="loading-spinner"></div>
                <div>æ­£åœ¨è·å–ä»Šæ—¥å‡€å€¼æ•°æ®...</div>
            </div>
        </div>
        <div class="pnl-content" id="pnlContent"></div>
    </div>
    
    <div id="userIdModal" class="modal-overlay" onclick="if(event.target === this) closeUserIdManager()">
        <div class="modal-content">
            <div class="modal-title">ğŸ”‘ ç”¨æˆ·IDç®¡ç†</div>
            <div class="modal-section">
                <div class="modal-label">å½“å‰ç”¨æˆ·ID</div>
                <div class="modal-value" id="currentUserId"></div>
            </div>
            <div class="modal-section">
                <button class="modal-btn" onclick="copyUserId()">ğŸ“‹ å¤åˆ¶ç”¨æˆ·ID</button>
            </div>
            <div class="modal-section">
                <div class="modal-label">è®¾ç½®æ–°çš„ç”¨æˆ·ID</div>
                <input type="text" id="newUserIdInput" class="modal-input" placeholder="è¾“å…¥æ–°çš„ç”¨æˆ·ID">
                <button class="modal-btn" onclick="applyNewUserId()">âœ… åº”ç”¨æ–°ID</button>
            </div>
            <div class="modal-section">
                <button class="modal-btn modal-btn-danger" onclick="confirmResetUserId()">ğŸ”„ é‡ç½®ç”¨æˆ·ID</button>
            </div>
            <div class="modal-section">
                <button class="modal-btn modal-btn-secondary" onclick="closeUserIdManager()">å…³é—­</button>
            </div>
        </div>
    </div>
</div>

<script src="js/mobile.js"></script>
<script>
// æµ‹è¯•JavaScriptæ˜¯å¦æ­£å¸¸åŠ è½½
console.log('Mobile.js loaded successfully');
console.log('Supabase:', typeof window.supabase);
console.log('Config loaded:', typeof SUPABASE_CONFIG);
console.log('Shared functions loaded:', typeof fetchIndexData);

// æµ‹è¯•æŒ‰é’®ç‚¹å‡»
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded');
    const userIdBtn = document.querySelector('.index-refresh-btn');
    if (userIdBtn) {
        console.log('User ID button found');
    } else {
        console.log('User ID button NOT found');
    }
});
</script>
</body>
</html>
